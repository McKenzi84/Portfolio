---
const { href } = Astro.props;
// Normalize base and href so we don't end up with '//' when BASE_URL is '/'
const rawBaseUrl = import.meta.env.BASE_URL || '/';
const baseUrl = rawBaseUrl === '/' ? '' : rawBaseUrl.replace(/\/$/, '');
const pathname = Astro.url.pathname.replace(rawBaseUrl, "");
const subpath = pathname.match(/[^\/]+/g);
const isActive = href === pathname || href === "/" + (subpath?.[0] || "");
const normalizedHref = href.startsWith('/') ? href : `/${href}`;
const fullHref = `${baseUrl}${normalizedHref}`;
---

<li>
  <a
    href={fullHref}
    class:list={[
      "block",
      "py-2",
      "px-3",
      "rounded-sm",
      "md:p-0",
      "font-bold",
      {
        "text-white bg-primary-700 md:bg-transparent md:text-primary-500 dark:text-white md:dark:text-primary-400":
          isActive,

        "text-gray-900 md:border-0 hover:text-primary-500 dark:text-white": !isActive,
      },
    ]}
    aria-current={isActive ? "page" : undefined}
  >
    <slot />
  </a>
</li>
